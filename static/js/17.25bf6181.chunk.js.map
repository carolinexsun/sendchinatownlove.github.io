{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","pages/PassportRedemption/VoucherFront.png","pages/PassportRedemption/VoucherBack.png","pages/PassportRedemption/PassportVoucher.tsx"],"names":["baseUrl","process","sellers","charges","vouchers","passportVouchers","contacts","sponsorSellers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","getSellerHours","getSellerDeliveryOptions","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","campaignId","projectId","metadata","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","project_id","is_distribution","campaign_id","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","filterGAM","filterGAMString","language","getCampaigns","getCampaignsForMerchant","getDistributor","getFiscalSponsor","getAllParticipatingSellers","getParticipatingMerchant","getParticipatingMerchantTickets","tickets_secret","page","items","printed","associated","getPassportEmailId","getContactInfo","passportId","createPassportEmailId","instagram","updatePassportInstagram","checkForValidTicket","ticket_id","updateTicketContactId","contact_id","getPassportTickets","getParticipatingSeller","getGiveawayTicketsForContact","contactId","sendRedeemTicketsEmail","getLocationById","locationId","getAllSponsors","getOneSponsor","rewardId","redeemReward","auth_token","tickets","createLyftReward","getLyftReward","redeemToken","token","getProject","light_up_chinatown_id","module","exports","Voucher","useParams","location","useLocation","search","URLSearchParams","convertToInt","input","parseInt","convertToBool","useState","restaurantName","setRestaurantName","restaurantTickets","setRestaurantTickets","useEffect","data","allTickets","getAllTickets","Page","map","restaurant","idx","Container","Image","src","VoucherImage","ContainerInfo","RestaurantName","className","length","TicketNumber","code","formattedCode","split","splice","join","formatTicketCode","BackImage","styled","div","img"],"mappings":"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","file":"static/js/17.25bf6181.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\nexport const nonprofits = baseUrl + 'nonprofits/';\nexport const passportVouchers = baseUrl + 'participating_sellers/';\nexport const contacts = baseUrl + 'contacts/';\nexport const tickets = baseUrl + 'tickets/';\nexport const participatingSellers = baseUrl + 'participating_sellers/';\nexport const sponsorSellers = baseUrl + 'sponsor_sellers/';\nexport const locations = baseUrl + 'locations/';\nexport const lyftRewards = 'lyft_rewards/';\nexport const projects = baseUrl + 'projects/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport {\n  charges,\n  sellers,\n  vouchers,\n  campaigns,\n  distributors,\n  passportVouchers,\n  contacts,\n  tickets,\n  participatingSellers,\n  sponsorSellers,\n  locations,\n  lyftRewards,\n  nonprofits,\n  projects,\n} from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\nexport const getSellerHours = async (id: string): Promise<any> => {\n  return await axios.get(sellers + id + '/open_hour');\n};\n\nexport const getSellerDeliveryOptions = async (id: string): Promise<any> => {\n  return await axios.get(sellers + id + '/delivery_options');\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean,\n  campaignId?: string,\n  projectId?: string,\n  metadata?: string | null\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        project_id: projectId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution, // TODO: deprecate this in favor of campaignId\n        campaign_id: campaignId,\n        metadata: metadata,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => {\n      throw err;\n    });\n\nexport const getMerchantGiftCards = async (\n  seller_id: string,\n  secret: string,\n  filterGAM: boolean = false\n) => {\n  const filterGAMString = filterGAM ? '?filterGAM=true' : ''; // if the key is present at all, filtering will happen\n  return axios\n    .get(sellers + seller_id + '/gift_cards/' + secret + filterGAMString)\n    .then((res) => res); // don't catch error, throw it up the stack\n};\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios\n    .get(campaigns)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getCampaignsForMerchant = async (\n  seller_id: string\n): Promise<any> => {\n  return await axios\n    .get(sellers + seller_id + '/campaigns')\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios\n    .get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getFiscalSponsor = async (id: string): Promise<any> => {\n  return await axios\n    .get(nonprofits + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getAllParticipatingSellers = async (): Promise<any> =>\n  axios\n    .get(passportVouchers)\n    .then((res) => res)\n    .catch((err) => err);\n\n// for passport crawl voucher print outs\nexport const getParticipatingMerchant = async (id: string) =>\n  axios\n    .get(passportVouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingMerchantTickets = async (\n  id: string,\n  tickets_secret: string,\n  page: number | null,\n  items: number | null,\n  printed: boolean | null,\n  associated: boolean | null\n) =>\n  axios\n    .get(passportVouchers + id + '/tickets/' + tickets_secret, {\n      params: { page, items, printed, associated },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\n// validate passport email\nexport const getPassportEmailId = async (email: string) =>\n  axios\n    .get(contacts, {\n      params: { email },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getContactInfo = async (passportId: string) =>\n  axios\n    .get(contacts + passportId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createPassportEmailId = async (\n  email: string,\n  instagram: string\n) => {\n  let params = {};\n\n  if (instagram) params = { email, instagram };\n  else params = { email };\n\n  return axios\n    .post(contacts, params)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const updatePassportInstagram = async (\n  id: string,\n  instagram: string\n) => {\n  return axios\n    .put(contacts + id, { instagram })\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const checkForValidTicket = async (ticket_id: string) =>\n  axios\n    .get(tickets + ticket_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateTicketContactId = async (\n  ticket_id: string,\n  contact_id: string\n) =>\n  axios\n    .put(tickets + ticket_id, { contact_id })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getPassportTickets = async (passportId: string) =>\n  axios\n    .get(contacts + passportId + '/tickets')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingSeller = async (sellerId: string) =>\n  axios\n    .get(participatingSellers + sellerId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getGiveawayTicketsForContact = async (contactId: string) =>\n  axios\n    .get(contacts + contactId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const sendRedeemTicketsEmail = async (passportId: string) =>\n  axios\n    .post(contacts + passportId + '/rewards')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLocationById = async (locationId: number) =>\n  axios\n    .get(locations + locationId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getAllSponsors = async () =>\n  axios\n    .get(sponsorSellers)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getOneSponsor = async (rewardId: number) =>\n  axios\n    .get(sponsorSellers + rewardId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemReward = async (\n  contact_id: number,\n  auth_token: string,\n  tickets: Array<any>\n) =>\n  axios\n    .put(contacts + contact_id + '/tickets/' + auth_token, { tickets })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createLyftReward = async (contact_id: number) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLyftReward = async (contact_id: number) =>\n  axios\n    .get(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemToken = async (contact_id: number, token: string) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards + token + '/redeem/')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getProject = async (project_id: number) =>\n  axios\n    .get(projects + project_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const light_up_chinatown_id = 1;\n","module.exports = __webpack_public_path__ + \"static/media/VoucherFront.17e749a1.png\";","module.exports = __webpack_public_path__ + \"static/media/VoucherBack.53dab2f2.png\";","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getParticipatingMerchant,\n  getParticipatingMerchantTickets,\n} from '../../utilities/api/interactionManager';\nimport { useLocation } from 'react-router-dom';\nimport { LoaderFillerContainer } from '../../components/Loader';\nimport VoucherImage from './VoucherFront.png';\nimport BackImage from './VoucherBack.png';\n\nconst Voucher = () => {\n  const { id, tickets_secret } = useParams();\n  const location = useLocation().search;\n  let params = new URLSearchParams(location);\n\n  const convertToInt = (input: string | null) => {\n    if (input === null) {\n      return null;\n    }\n    const num = parseInt(input, 10);\n    return num;\n  };\n\n  const convertToBool = (input: string | null) => {\n    if (input === 'true') {\n      return true;\n    }\n    if (input === 'false') {\n      return false;\n    }\n    return null;\n  };\n\n  const page = convertToInt(params.get('page'));\n  const items = convertToInt(params.get('items'));\n  const printed = convertToBool(params.get('printed'));\n  const associated = convertToBool(params.get('associated'));\n\n  const [restaurantName, setRestaurantName] = useState('');\n  const [restaurantTickets, setRestaurantTickets] = useState<any | null>();\n\n  useEffect(() => {\n    const getAllTickets = async () => {\n      const {\n        data: { name },\n      } = await getParticipatingMerchant(id);\n      const { data: allTickets } = await getParticipatingMerchantTickets(\n        id,\n        tickets_secret,\n        page,\n        items,\n        printed,\n        associated\n      );\n\n      if (allTickets && name) {\n        setRestaurantName(name);\n        setRestaurantTickets(allTickets);\n      }\n    };\n    getAllTickets();\n  }, [id, location, tickets_secret, associated, items, page, printed]);\n\n  const formatTicketCode = (code) => {\n    const formattedCode = code.split('');\n    formattedCode.splice(3, 0, '-');\n    return formattedCode.join('');\n  };\n\n  return restaurantTickets ? (\n    <Page>\n      {restaurantTickets.map((restaurant, idx) => (\n        <>\n          <Container>\n            <Image src={VoucherImage} />\n            <ContainerInfo>\n              <RestaurantName\n                className={restaurantName.length > 15 ? 'long' : ''}\n              >\n                {restaurantName}\n              </RestaurantName>\n              <TicketNumber>\n                {formatTicketCode(restaurant.ticket_id)}\n              </TicketNumber>\n            </ContainerInfo>\n          </Container>\n          {(idx + 1) % 4 === 0 && (\n            <>\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n            </>\n          )}\n        </>\n      ))}\n    </Page>\n  ) : (\n    <LoaderFillerContainer />\n  );\n};\n\nexport default Voucher;\n\nconst Page = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Container = styled.div`\n  height: 599px;\n  width: 775px;\n  display: grid;\n  grid-template-rows: 1fr;\n`;\n\nconst Image = styled.img`\n  height: 599px;\n  width: 775px;\n  grid-row: 1;\n  grid-column: 1;\n`;\n\nconst ContainerInfo = styled.div`\n  grid-row: 1;\n  grid-column: 1;\n  height: 599px;\n  width: 775px;\n  display: flex;\n  z-index: 5;\n`;\n\nconst RestaurantName = styled.div`\n  font-family: 'Nova Mono';\n  text-transform: uppercase;\n  color: #bc4f5e;\n\n  transform: rotate(15deg);\n  -webkit-transform: rotate(15deg);\n  -moz-transform: rotate(15deg);\n  -ms-transform: rotate(15deg);\n  -o-transform: rotate(15deg);\n\n  margin-top: 317px;\n  margin-left: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n\n  width: 150px;\n  height: 25px;\n  padding: 0;\n\n  &.long {\n    margin-top: 312px;\n    font-size: 12px;\n    height: 35px;\n  }\n`;\n\nconst TicketNumber = styled.div`\n  color: #a8192e;\n  font-weight: bold;\n  font-style: italic;\n  font-size: 50px;\n  margin: 160px 0 0 210px;\n\n  width: 285px;\n  text-align: center;\n`;\n"],"sourceRoot":""}